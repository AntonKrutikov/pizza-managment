<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizza Shop Management</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header class="app-header">
        <h1>Pizza Shop Management</h1>
        <button type="button" id="analytics-btn" class="analytics-btn" title="Analytics">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 20V10M12 20V4M6 20v-6"/>
            </svg>
        </button>
    </header>

    <nav class="screen-nav">
        <button class="nav-tab active" data-screen="take-order">Take Order</button>
        <button class="nav-tab" data-screen="ongoing-orders">Ongoing Orders <span id="ongoing-orders-badge" class="nav-badge" style="display: none;">0</span></button>
        <button class="nav-tab" data-screen="orders-history">Orders History</button>
    </nav>

    <div class="screens-container">
        <section id="order-form-section" class="screen active" data-screen="take-order">
            <div class="order-form-header">
                <h2>Take Order</h2>
                <button type="button" id="reset-order">Reset</button>
            </div>

            <form id="order-form">
                <div id="menu-items-container">
                    <!-- Menu categories and items will be loaded from data/menu.json -->
                </div>
            </form>

            <!-- Floating button to scroll to order section -->
            <button type="button" id="goto-order-btn" style="display: none;">
                <span class="cart-count">0</span>
            </button>

            <!-- Current order items -->
            <div id="current-order-section" style="display: none;">
                <h3>Current Order Items</h3>
                <ul id="current-order-items"></ul>
                <div class="order-total">
                    <strong>Total: <span id="order-total-amount">0</span> THB</strong>
                </div>
            </div>

            <div id="order-options" style="display: none;">
                <label for="paid-status">Payment Status:</label>
                <div id="paid-status-grid">
                    <label class="paid-card paid-yes">
                        <input type="radio" name="paid" value="true">
                        <span>Paid</span>
                    </label>
                    <label class="paid-card paid-no">
                        <input type="radio" name="paid" value="false">
                        <span>Not Paid</span>
                    </label>
                </div>
                <label for="eat-type">Order Type:</label>
                <div id="eat-type-grid">
                    <label class="eat-card">
                        <input type="radio" name="eatType" value="eat-in">
                        <span>Eat In</span>
                    </label>
                    <label class="eat-card">
                        <input type="radio" name="eatType" value="take-away">
                        <span>Take Away</span>
                    </label>
                </div>

                <!-- Table number -->
                <div id="table-number-section">
                    <label>ü™ë Table Number (optional):</label>
                    <div id="table-number-grid">
                        <button type="button" class="number-btn" data-table="1">1</button>
                        <button type="button" class="number-btn" data-table="2">2</button>
                        <button type="button" class="number-btn" data-table="3">3</button>
                        <button type="button" class="number-btn" data-table="4">4</button>
                        <button type="button" class="number-btn" data-table="5">5</button>
                        <button type="button" class="number-btn" data-table="6">6</button>
                        <button type="button" class="number-btn" data-table="7">7</button>
                        <button type="button" class="number-btn" data-table="8">8</button>
                        <button type="button" class="number-btn" data-table="9">9</button>
                        <button type="button" class="number-btn" data-table="10">10</button>
                    </div>
                </div>

                <!-- Sound indicator -->
                <div id="sound-indicator-section">
                    <label>üîî Sound Indicator (optional):</label>
                    <div id="sound-indicator-grid">
                        <button type="button" class="number-btn" data-sound="1">1</button>
                        <button type="button" class="number-btn" data-sound="2">2</button>
                        <button type="button" class="number-btn" data-sound="3">3</button>
                        <button type="button" class="number-btn" data-sound="4">4</button>
                        <button type="button" class="number-btn" data-sound="5">5</button>
                        <button type="button" class="number-btn" data-sound="6">6</button>
                        <button type="button" class="number-btn" data-sound="7">7</button>
                        <button type="button" class="number-btn" data-sound="8">8</button>
                        <button type="button" class="number-btn" data-sound="9">9</button>
                        <button type="button" class="number-btn" data-sound="10">10</button>
                    </div>
                </div>

                <!-- Customer description -->
                <div id="customer-description-section">
                    <label>Customer (optional):</label>
                    <div id="customer-grid">
                        <button type="button" class="customer-btn" data-customer="Man">üë® Man</button>
                        <button type="button" class="customer-btn" data-customer="Woman">üë© Woman</button>
                        <button type="button" class="customer-btn" data-customer="Children">üë∂ Children</button>
                        <button type="button" class="customer-btn" data-customer="Couple">üë´ Couple</button>
                        <button type="button" class="customer-btn" data-customer="Family">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family</button>
                        <button type="button" class="customer-btn" data-customer="Group">üë• Group</button>
                    </div>
                </div>

                <button type="button" id="send-order" disabled>Send to Cook</button>
            </div>
        </section>

        <section id="orders-section" class="screen" data-screen="ongoing-orders">
            <h2>Ongoing Orders <span id="ongoing-orders-header-badge" class="header-badge" style="display: none;">0</span></h2>
            <ul id="orders-list"></ul>
        </section>

        <section id="history-section" class="screen" data-screen="orders-history">
            <h2>Orders History</h2>
            <ul id="history-list"></ul>
        </section>

        <section id="analytics-section" class="screen" data-screen="analytics">
            <div class="analytics-header">
                <button type="button" id="analytics-back-btn" class="analytics-back-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <h2>Analytics Dashboard</h2>
            </div>

            <!-- Period Tabs -->
            <div class="analytics-tabs">
                <button class="analytics-tab active" data-period="daily">Today</button>
                <button class="analytics-tab" data-period="weekly">Week</button>
                <button class="analytics-tab" data-period="monthly">Month</button>
                <button class="analytics-tab" data-period="calendar">Calendar</button>
            </div>

            <!-- Sub-navigation for Week/Month selection -->
            <div id="period-selector" class="period-selector" style="display: none;">
                <button class="period-nav-btn" id="period-prev">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                <span id="period-label" class="period-label">Current Period</span>
                <button class="period-nav-btn" id="period-next">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </button>
            </div>

            <!-- Calendar View -->
            <div id="calendar-view" class="calendar-view" style="display: none;">
                <div class="nav-row">
                    <button class="nav-btn" id="calendar-prev-month">‚Äπ</button>
                    <span id="calendar-month-label" class="nav-label">January 2025</span>
                    <button class="nav-btn" id="calendar-next-month">‚Ä∫</button>
                </div>
                <div class="nav-row small">
                    <button class="nav-btn small" id="calendar-prev-week">‚Äπ</button>
                    <span id="calendar-week-label" class="nav-label small">Week 1</span>
                    <button class="nav-btn small" id="calendar-next-week">‚Ä∫</button>
                </div>
                <div class="calendar-weekdays">
                    <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                </div>
                <div id="calendar-grid" class="calendar-grid"></div>
                <div id="calendar-selected-info" class="calendar-selected-info"></div>
            </div>

            <!-- Summary Cards -->
            <div class="analytics-summary">
                <div class="summary-card">
                    <div class="summary-icon revenue-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 1v22M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Total Revenue</span>
                        <span class="summary-value" id="total-revenue">0 THB</span>
                        <span class="summary-change" id="revenue-change"></span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon orders-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Total Orders</span>
                        <span class="summary-value" id="total-orders">0</span>
                        <span class="summary-change" id="orders-change"></span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon avg-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Avg. Order Value</span>
                        <span class="summary-value" id="avg-order">0 THB</span>
                        <span class="summary-change" id="avg-change"></span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon items-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/>
                            <path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"/>
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Items Sold</span>
                        <span class="summary-value" id="items-sold">0</span>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="analytics-charts">
                <!-- Order Type Breakdown -->
                <div class="chart-card">
                    <h3>Order Type</h3>
                    <div class="chart-container">
                        <div id="order-type-chart" class="pie-chart"></div>
                        <div id="order-type-legend" class="chart-legend"></div>
                    </div>
                </div>

                <!-- Category Breakdown -->
                <div class="chart-card">
                    <h3>Sales by Category</h3>
                    <div class="chart-container">
                        <div id="category-chart" class="pie-chart"></div>
                        <div id="category-legend" class="chart-legend"></div>
                    </div>
                </div>
            </div>

            <!-- Top Items -->
            <div class="analytics-section">
                <h3>Top Selling Items</h3>
                <div id="top-items-list" class="top-items-list"></div>
            </div>

            <!-- Sales Trend -->
            <div class="analytics-section">
                <h3 id="trend-title">Sales Trend</h3>
                <div id="sales-trend-chart" class="bar-chart-container"></div>
            </div>

            <!-- Peak Hours -->
            <div class="analytics-section">
                <h3>Peak Hours (Today)</h3>
                <div id="peak-hours" class="peak-hours"></div>
            </div>
        </section>
    </div>

    <!-- Custom Price Popup -->
    <div id="custom-price-popup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3>Custom Pizza Price</h3>
            <div class="popup-input-group">
                <label for="custom-price-input">Enter price (THB):</label>
                <input type="number" id="custom-price-input" min="1" placeholder="0" inputmode="numeric">
            </div>
            <div class="popup-buttons">
                <button type="button" id="custom-price-cancel" class="popup-btn-cancel">Cancel</button>
                <button type="button" id="custom-price-confirm" class="popup-btn-confirm">Add to Order</button>
            </div>
        </div>
    </div>

    <script type="module" src="main.js"></script>
</body>

</html>