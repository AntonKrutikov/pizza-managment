<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizza Shop Management</title>
    <link rel="stylesheet" href="style.css">
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#d35400">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="PizzaPOS">
    <link rel="apple-touch-icon" href="images/icons/app-icon-192.png">
</head>

<body>
    <header class="app-header">
        <h1>Pizza Shop Management</h1>
        <div class="header-actions">
            <span id="offline-indicator" class="offline-indicator" style="display: none;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="1" y1="1" x2="23" y2="23" />
                    <path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55" />
                    <path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39" />
                    <path d="M10.71 5.05A16 16 0 0 1 22.58 9" />
                    <path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88" />
                    <path d="M8.53 16.11a6 6 0 0 1 6.95 0" />
                    <line x1="12" y1="20" x2="12.01" y2="20" />
                </svg>
                Offline
            </span>
            <span id="header-clock" class="header-clock"></span>
            <button type="button" id="fullscreen-btn" class="header-action-btn" title="Enter Fullscreen">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3" />
                </svg>
            </button>
            <button type="button" id="analytics-btn" class="header-action-btn" title="Analytics">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 20V10M12 20V4M6 20v-6" />
                </svg>
            </button>
            <button type="button" id="settings-btn" class="header-action-btn" title="Settings">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3" />
                    <path
                        d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
                </svg>
            </button>
        </div>
    </header>

    <nav class="screen-nav">
        <button class="nav-tab active" data-screen="take-order">Take Order</button>
        <button class="nav-tab" data-screen="ongoing-orders">Ongoing Orders <span id="ongoing-orders-badge"
                class="nav-badge" style="display: none;">0</span></button>
        <button class="nav-tab" data-screen="orders-history">Orders History</button>
    </nav>

    <div class="screens-container">
        <section id="order-form-section" class="screen active" data-screen="take-order">
            <div class="order-form-header">
                <h2>Take Order</h2>
                <button type="button" id="reset-order">Reset</button>
            </div>

            <form id="order-form">
                <div id="menu-items-container">
                    <!-- Menu categories and items will be loaded from data/menu.json -->
                </div>
            </form>

            <!-- Floating button to scroll to order section -->
            <button type="button" id="goto-order-btn" style="display: none;">
                <span class="cart-count">0</span>
            </button>

            <!-- Current order items -->
            <div id="current-order-section" style="display: none;">
                <h3>Current Order Items</h3>
                <ul id="current-order-items"></ul>
                <div class="order-total">
                    <strong>Total: <span id="order-total-amount">0</span> THB</strong>
                </div>
            </div>

            <div id="order-options" style="display: none;">
                <label for="paid-status">Payment Status:</label>
                <div id="paid-status-grid">
                    <label class="paid-card paid-cash">
                        <input type="radio" name="paid" value="cash">
                        <span>üíµ Cash</span>
                    </label>
                    <label class="paid-card paid-card-type">
                        <input type="radio" name="paid" value="card">
                        <span>üí≥ Card</span>
                    </label>
                    <label class="paid-card paid-no">
                        <input type="radio" name="paid" value="false">
                        <span>Not Paid</span>
                    </label>
                </div>
                <label for="eat-type">Order Type:</label>
                <div id="eat-type-grid">
                    <label class="eat-card">
                        <input type="radio" name="eatType" value="eat-in">
                        <span>Eat In</span>
                    </label>
                    <label class="eat-card">
                        <input type="radio" name="eatType" value="take-away">
                        <span>Take Away</span>
                    </label>
                </div>

                <!-- Order Source -->
                <label for="order-source">Order Source:</label>
                <div id="order-source-grid">
                    <label class="source-card">
                        <input type="radio" name="orderSource" value="pizza-shop">
                        <span>üçï Pizza Shop</span>
                    </label>
                    <label class="source-card">
                        <input type="radio" name="orderSource" value="steak-shop">
                        <span>ü•© Steak Shop</span>
                    </label>
                </div>

                <!-- Table number -->
                <div id="table-number-section">
                    <label>ü™ë Table Number (optional):</label>
                    <div id="table-number-grid">
                        <button type="button" class="number-btn" data-table="1">1</button>
                        <button type="button" class="number-btn" data-table="2">2</button>
                        <button type="button" class="number-btn" data-table="3">3</button>
                        <button type="button" class="number-btn" data-table="4">4</button>
                        <button type="button" class="number-btn" data-table="5">5</button>
                        <button type="button" class="number-btn" data-table="6">6</button>
                        <button type="button" class="number-btn" data-table="7">7</button>
                        <button type="button" class="number-btn" data-table="8">8</button>
                        <button type="button" class="number-btn" data-table="9">9</button>
                        <button type="button" class="number-btn" data-table="10">10</button>
                    </div>
                </div>

                <!-- Sound indicator -->
                <div id="sound-indicator-section">
                    <label>üîî Sound Indicator (optional):</label>
                    <div id="sound-indicator-grid">
                        <button type="button" class="number-btn" data-sound="1">1</button>
                        <button type="button" class="number-btn" data-sound="2">2</button>
                        <button type="button" class="number-btn" data-sound="3">3</button>
                        <button type="button" class="number-btn" data-sound="4">4</button>
                        <button type="button" class="number-btn" data-sound="5">5</button>
                        <button type="button" class="number-btn" data-sound="6">6</button>
                        <button type="button" class="number-btn" data-sound="7">7</button>
                        <button type="button" class="number-btn" data-sound="8">8</button>
                        <button type="button" class="number-btn" data-sound="9">9</button>
                        <button type="button" class="number-btn" data-sound="10">10</button>
                    </div>
                </div>

                <!-- Customer description -->
                <div id="customer-description-section">
                    <label>Customer (optional):</label>
                    <div id="customer-grid">
                        <button type="button" class="customer-btn" data-customer="Man">üë® Man</button>
                        <button type="button" class="customer-btn" data-customer="Woman">üë© Woman</button>
                        <button type="button" class="customer-btn" data-customer="Children">üë∂ Children</button>
                        <button type="button" class="customer-btn" data-customer="Couple">üë´ Couple</button>
                        <button type="button" class="customer-btn" data-customer="Family">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family</button>
                        <button type="button" class="customer-btn" data-customer="Group">üë• Group</button>
                    </div>
                </div>

                <button type="button" id="send-order" disabled>Send to Cook</button>
            </div>
        </section>

        <section id="orders-section" class="screen" data-screen="ongoing-orders">
            <div class="orders-header">
                <h2>Ongoing Orders <span id="ongoing-orders-header-badge" class="header-badge" 0</span></h2>
                <div class="layout-controls">
                    <button class="layout-btn" data-columns="1" title="1 Column">1</button>
                    <button class="layout-btn" data-columns="2" title="2 Columns">2</button>
                    <button class="layout-btn active" data-columns="3" title="3 Columns">3</button>
                </div>
            </div>
            <ul id="orders-list"></ul>
        </section>

        <section id="history-section" class="screen" data-screen="orders-history">
            <h2>Orders History</h2>
            <ul id="history-list"></ul>
        </section>

        <section id="settings-section" class="screen" data-screen="settings">
            <div class="settings-header">
                <button type="button" id="settings-back-btn" class="settings-back-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                    Back
                </button>
                <h2>Settings</h2>
            </div>

            <div class="settings-content">
                <!-- Data Management Section -->
                <div class="settings-section">
                    <h3>Data Management</h3>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <span class="settings-item-title">Export Database</span>
                            <span class="settings-item-description">Download all orders data as a JSON file</span>
                        </div>
                        <button type="button" id="export-data-btn" class="settings-btn">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" />
                            </svg>
                            Export
                        </button>
                    </div>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <span class="settings-item-title">Import Database</span>
                            <span class="settings-item-description">Restore orders data from a JSON file</span>
                        </div>
                        <label class="settings-btn" for="import-data-input">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" />
                            </svg>
                            Import
                        </label>
                        <input type="file" id="import-data-input" accept=".json" style="display: none;">
                    </div>
                </div>

                <!-- Cloud Backup Section -->
                <div class="settings-section">
                    <h3>Cloud Backup</h3>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <span class="settings-item-title">Backup to Cloud</span>
                            <span class="settings-item-description">Save your data to Firebase cloud storage</span>
                            <span id="backup-status" class="backup-status"></span>
                        </div>
                        <button type="button" id="backup-to-cloud-btn" class="settings-btn">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z" />
                                <polyline points="9 15 12 12 15 15" />
                                <line x1="12" y1="12" x2="12" y2="21" />
                            </svg>
                            <span id="backup-btn-text">Backup</span>
                        </button>
                    </div>
                    <div class="backup-info" id="backup-info">
                        <div class="backup-info-row">
                            <span class="backup-info-label">Last Backup:</span>
                            <span id="last-backup-time" class="backup-info-value">Never</span>
                        </div>
                        <div class="backup-info-row">
                            <span class="backup-info-label">Backup ID:</span>
                            <span id="backup-uid" class="backup-info-value">-</span>
                        </div>
                    </div>
                </div>

                <!-- Database Info Section -->
                <div class="settings-section">
                    <h3>Database Info</h3>
                    <div class="settings-info-grid">
                        <div class="settings-info-item">
                            <span class="settings-info-label">Total Orders</span>
                            <span class="settings-info-value" id="settings-total-orders">0</span>
                        </div>
                        <div class="settings-info-item">
                            <span class="settings-info-label">Completed Orders</span>
                            <span class="settings-info-value" id="settings-completed-orders">0</span>
                        </div>
                        <div class="settings-info-item">
                            <span class="settings-info-label">Storage Used</span>
                            <span class="settings-info-value" id="settings-storage-used">0 KB</span>
                        </div>
                    </div>
                </div>

                <!-- Danger Zone -->
                <div class="settings-section danger-zone">
                    <h3>Danger Zone</h3>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <span class="settings-item-title">Clear All Data</span>
                            <span class="settings-item-description">Permanently delete all orders. This cannot be
                                undone.</span>
                        </div>
                        <button type="button" id="clear-data-btn" class="settings-btn danger">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" />
                            </svg>
                            Clear Data
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section id="analytics-section" class="screen" data-screen="analytics">
            <div class="analytics-header">
                <button type="button" id="analytics-back-btn" class="analytics-back-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                    Back
                </button>
                <h2>Analytics Dashboard</h2>
            </div>

            <!-- Period Tabs -->
            <div class="analytics-tabs">
                <button class="analytics-tab active" data-period="daily">Today</button>
                <button class="analytics-tab" data-period="weekly">Week</button>
                <button class="analytics-tab" data-period="monthly">Month</button>
                <button class="analytics-tab" data-period="calendar">Calendar</button>
            </div>

            <!-- Sub-navigation for Week/Month selection -->
            <div id="period-selector" class="period-selector" style="display: none;">
                <button class="period-nav-btn" id="period-prev">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 18l-6-6 6-6" />
                    </svg>
                </button>
                <span id="period-label" class="period-label">Current Period</span>
                <button class="period-nav-btn" id="period-next">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6" />
                    </svg>
                </button>
            </div>

            <!-- Calendar View -->
            <div id="calendar-view" class="calendar-view" style="display: none;">
                <div class="nav-row">
                    <button class="nav-btn" id="calendar-prev-month">‚Äπ</button>
                    <span id="calendar-month-label" class="nav-label">January 2025</span>
                    <button class="nav-btn" id="calendar-next-month">‚Ä∫</button>
                </div>
                <div class="nav-row small">
                    <button class="nav-btn small" id="calendar-prev-week">‚Äπ</button>
                    <span id="calendar-week-label" class="nav-label small">Week 1</span>
                    <button class="nav-btn small" id="calendar-next-week">‚Ä∫</button>
                </div>
                <div class="calendar-weekdays">
                    <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                </div>
                <div id="calendar-grid" class="calendar-grid"></div>
                <div id="calendar-selected-info" class="calendar-selected-info"></div>
            </div>

            <!-- Summary Cards -->
            <div class="analytics-summary">
                <div class="summary-card">
                    <div class="summary-icon revenue-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 1v22M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6" />
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Total Revenue</span>
                        <span class="summary-value" id="total-revenue">0 THB</span>
                        <span class="summary-change" id="revenue-change"></span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon orders-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Total Orders</span>
                        <span class="summary-value" id="total-orders">0</span>
                        <span class="summary-change" id="orders-change"></span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon avg-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 6v6l4 2" />
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Avg. Order Value</span>
                        <span class="summary-value" id="avg-order">0 THB</span>
                        <span class="summary-change" id="avg-change"></span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon items-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="9" cy="21" r="1" />
                            <circle cx="20" cy="21" r="1" />
                            <path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6" />
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Items Sold</span>
                        <span class="summary-value" id="items-sold">0</span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon waiting-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                    </div>
                    <div class="summary-content">
                        <span class="summary-label">Avg. Wait Time</span>
                        <span class="summary-value" id="avg-wait-time">-</span>
                        <span class="summary-sub" id="wait-time-range"></span>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="analytics-charts">
                <!-- Order Type Breakdown -->
                <div class="chart-card">
                    <h3>Order Type</h3>
                    <div class="chart-container">
                        <div id="order-type-chart" class="pie-chart"></div>
                        <div id="order-type-legend" class="chart-legend"></div>
                    </div>
                </div>

                <!-- Category Breakdown -->
                <div class="chart-card">
                    <h3>Sales by Category</h3>
                    <div class="chart-container">
                        <div id="category-chart" class="pie-chart"></div>
                        <div id="category-legend" class="chart-legend"></div>
                    </div>
                </div>

                <!-- Payment Method Breakdown -->
                <div class="chart-card">
                    <h3>Payment Method</h3>
                    <div class="chart-container">
                        <div id="payment-method-chart" class="pie-chart"></div>
                        <div id="payment-method-legend" class="chart-legend"></div>
                    </div>
                </div>
            </div>

            <!-- Top Items -->
            <div class="analytics-section">
                <h3>Top Selling Items</h3>
                <div id="top-items-list" class="top-items-list"></div>
            </div>

            <!-- Sales Trend -->
            <div class="analytics-section">
                <h3 id="trend-title">Sales Trend</h3>
                <div id="sales-trend-chart" class="bar-chart-container"></div>
            </div>

            <!-- Peak Hours -->
            <div class="analytics-section">
                <h3>Peak Hours (Today)</h3>
                <div id="peak-hours" class="peak-hours"></div>
            </div>
        </section>
    </div>

    <!-- Custom Price Popup -->
    <div id="custom-price-popup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3>Custom Pizza Price</h3>
            <div class="popup-input-group">
                <label for="custom-price-input">Enter price (THB):</label>
                <input type="number" id="custom-price-input" min="1" placeholder="0" inputmode="numeric">
            </div>
            <div class="popup-buttons">
                <button type="button" id="custom-price-cancel" class="popup-btn-cancel">Cancel</button>
                <button type="button" id="custom-price-confirm" class="popup-btn-confirm">Add to Order</button>
            </div>
        </div>
    </div>

    <!-- Number Selector Popup (for table and sound indicator) -->
    <div id="number-selector-popup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3 id="number-selector-title">Select Number</h3>
            <div class="number-selector-grid" id="number-selector-grid">
                <button type="button" class="number-selector-btn" data-value="1">1</button>
                <button type="button" class="number-selector-btn" data-value="2">2</button>
                <button type="button" class="number-selector-btn" data-value="3">3</button>
                <button type="button" class="number-selector-btn" data-value="4">4</button>
                <button type="button" class="number-selector-btn" data-value="5">5</button>
                <button type="button" class="number-selector-btn" data-value="6">6</button>
                <button type="button" class="number-selector-btn" data-value="7">7</button>
                <button type="button" class="number-selector-btn" data-value="8">8</button>
                <button type="button" class="number-selector-btn" data-value="9">9</button>
                <button type="button" class="number-selector-btn" data-value="10">10</button>
            </div>
            <div class="popup-buttons-stack">
                <button type="button" id="number-selector-confirm" class="popup-btn-confirm">Confirm</button>
                <div class="popup-buttons-row">
                    <button type="button" id="number-selector-clear" class="popup-btn-clear">Clear</button>
                    <button type="button" id="number-selector-cancel" class="popup-btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Eat Type Selector Popup -->
    <div id="eat-type-selector-popup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3>Change Order Type</h3>
            <div class="eat-type-selector-grid">
                <button type="button" class="eat-type-selector-btn" data-value="eat-in">
                    <span class="eat-type-icon">üçΩÔ∏è</span>
                    <span>Eat In</span>
                </button>
                <button type="button" class="eat-type-selector-btn" data-value="take-away">
                    <span class="eat-type-icon">üì¶</span>
                    <span>Take Away</span>
                </button>
            </div>
            <div class="popup-buttons-stack">
                <button type="button" id="eat-type-selector-confirm" class="popup-btn-confirm">Confirm</button>
                <button type="button" id="eat-type-selector-cancel" class="popup-btn-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Item Action Confirmation Popup (served/remove) -->
    <div id="item-action-popup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3 id="item-action-title">Confirm Action</h3>
            <p id="item-action-message" class="popup-message"></p>
            <div class="popup-buttons-stack">
                <button type="button" id="item-action-confirm" class="popup-btn-confirm">Confirm</button>
                <button type="button" id="item-action-cancel" class="popup-btn-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Payment Type Selector Popup -->
    <div id="payment-type-popup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3>How did customer pay?</h3>
            <div class="payment-type-selector-grid">
                <button type="button" class="payment-type-selector-btn" data-value="cash">
                    <span class="payment-type-icon">üíµ</span>
                    <span>Cash</span>
                </button>
                <button type="button" class="payment-type-selector-btn" data-value="card">
                    <span class="payment-type-icon">üí≥</span>
                    <span>Card</span>
                </button>
            </div>
            <div class="popup-buttons-stack">
                <button type="button" id="payment-type-confirm" class="popup-btn-confirm" disabled>Confirm</button>
                <button type="button" id="payment-type-cancel" class="popup-btn-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Items to Order Popup -->
    <div id="add-items-popup" class="popup-overlay" style="display: none;">
        <div class="popup-content popup-content-fullscreen">
            <div class="add-items-header">
                <button type="button" id="add-items-cancel" class="popup-back-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                    Cancel
                </button>
                <h3>Add Items to Order <span id="add-items-order-no"></span></h3>
                <div class="add-items-cart-summary">
                    <span id="add-items-count">0 items</span>
                    <span id="add-items-total">0 THB</span>
                </div>
            </div>

            <div class="add-items-content">
                <div id="add-items-cart" class="add-items-cart" style="display: none;">
                    <h4>Selected Items</h4>
                    <ul id="add-items-cart-list"></ul>
                </div>
                <div id="add-items-menu-container" class="add-items-menu"></div>
            </div>

            <div class="add-items-footer">
                <button type="button" id="add-items-confirm" class="popup-btn-confirm" disabled>
                    Add <span id="add-items-btn-count">0</span> Items (<span id="add-items-btn-total">0</span> THB)
                </button>
            </div>
        </div>
    </div>

    <!-- Add Items Custom Price Popup -->
    <div id="add-items-custom-price-popup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3>Custom Price</h3>
            <div class="popup-input-group">
                <label for="add-items-custom-price-input">Enter price (THB):</label>
                <input type="number" id="add-items-custom-price-input" min="1" placeholder="0" inputmode="numeric">
            </div>
            <div class="popup-buttons-stack">
                <button type="button" id="add-items-custom-price-confirm" class="popup-btn-confirm" disabled>Add
                    Item</button>
                <button type="button" id="add-items-custom-price-cancel" class="popup-btn-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore-compat.js"></script>

    <script type="module" src="main.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>